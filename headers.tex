\usepackage{array}
\usepackage{tablefootnote}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx,grffile}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{xspace}
\usepackage{caption}
\usepackage{booktabs}
\usepackage{subcaption,paralist,pdflscape,afterpage}
\usepackage[hyphens]{url}
\usepackage{hyperref}
\usepackage{multirow}
\usepackage{lettrine}
\usepackage{wrapfig}
\usepackage{lipsum}
\usepackage{titlesec}
\usepackage{changepage}
\usepackage{tikz}
\usepackage{listings}
\usepackage{makecell}
\usepackage{pifont}
\usepackage[percent]{overpic}
\usepackage[T1]{fontenc}
\usepackage[noadjust]{cite}
\usepackage{cleveref}
\usepackage{etoolbox}

\crefformat{footnote}{#2\footnotemark[#1]#3}
\patchcmd{\footnotemark}{\stepcounter{footnote}}{\refstepcounter{footnote}}{}{}

%% https://tex.stackexchange.com/questions/55664/fake-small-caps-with-xetex-fontspec
%% https://tex.stackexchange.com/questions/364994/putting-a-matrix-inside-of-caption-gives-caption-has-an-extra
%% https://tex.stackexchange.com/questions/471070/is-there-a-latex-command-to-print-the-name-of-the-font-used-for-text-and-for-mat
\makeatletter
\newcommand*{\fauxsc}[1]{%
  %% \fauxschelper{#1} \relax\relax
  %%%%
  \ifx\f@shape\my@test@it
    \fauxschelper{#1} \relax\relax
  \else\ifx\f@series\my@test@bf
    \fauxschelper{#1} \relax\relax
  \else
    \textsc{#1}%
  \fi\fi
  %%%%
  %% \ifx\f@shape\my@test@sc
  %%   #1%
  %% \else
  %%   \fauxschelper{#1} \relax\relax
  %% \fi
}
\newcommand*{\my@test@bf}{b}
\newcommand*{\my@test@sc}{sc}
\newcommand*{\my@test@it}{it}
\makeatother
\def\fauxschelper#1 #2\relax{%
  \fauxschelphelp#1\relax\relax%
  \if\relax#2\relax\else\ \fauxschelper#2\relax\fi%
}
\def\Hscale{.83}\def\Vscale{.76}\def\Cscale{1.00}
\def\fauxschelphelp#1#2\relax{%
  \ifnum`#1>``\ifnum`#1<`\{\scalebox{\Hscale}[\Vscale]{\uppercase{#1}}\else%
    \scalebox{\Cscale}[1]{#1}\fi\else\scalebox{\Cscale}[1]{#1}\fi%
  \ifx\relax#2\relax\else\fauxschelphelp#2\relax\fi}

\newcommand{\manic}{{\protect\fauxsc{Manic}}\xspace}
\newcommand{\msilicon}{{\protect\fauxsc{Manic-Silicon}}\xspace}
\newcommand{\sonic}{{\protect\fauxsc{Sonic}}\xspace}
\newcommand{\snafu}{{\protect\fauxsc{Snafu}}\xspace}
\newcommand{\vdf}{{\protect\fauxsc{Vector-Dataflow}}\xspace}
\newcommand{\riptide}{{\protect\fauxsc{RipTide}}\xspace}
\newcommand{\ulp}{{{ultra-low-power}}\xspace}
\newcommand{\Ulp}{{{Ultra-low-power}}\xspace}

\captionsetup{compatibility=false}
\captionsetup[table]{labelfont={bf},font={small},aboveskip=4pt,belowskip=0pt}
\captionsetup[figure]{labelfont={bf},font={small},aboveskip=4pt,belowskip=0pt}
\captionsetup[subfigure]{labelfont={},font={footnotesize,it},aboveskip=2pt,belowskip=-2pt}

\let\originalparagraph\paragraph
\renewcommand{\paragraph}[2][:]{\originalparagraph{#2#1}}

\addto\extrasenglish{
\renewcommand{\chapterautorefname}{Ch.}
\renewcommand{\sectionautorefname}{Sec.}
\renewcommand{\subsectionautorefname}{Sec.}
\renewcommand{\subsubsectionautorefname}{Sec.}
\renewcommand{\tableautorefname}{Table}
\renewcommand{\figureautorefname}{Fig.}
\providecommand*{\lstlistingautorefname}{Listing}
\renewcommand{\subfigureautorefname}{Fig.}
\renewcommand{\equationautorefname}{Eq.}
}

\titlespacing\section{0pt}{4pt}{2pt}
\titlespacing\subsection{0pt}{4pt}{2pt}
\titlespacing\subsubsection{0pt}{4pt}{2pt}
\titlespacing\paragraph{0pt}{4pt}{2pt}
\titleformat{\section}{\large\bfseries}{\thesection.}{0.5em}{\MakeUppercase}[]
\titleformat{\paragraph}[runin]{\bfseries\itshape}{\theparagraph.}{}{}

\newcommand{\tmp}[1]{\textcolor{red}{#1}\xspace}

\definecolor{hotpink}{RGB}{255, 0, 255}
\definecolor{darkgreen}{RGB}{32, 192, 32}
\definecolor{darkyellow}{RGB}{192, 140, 37}
\definecolor{darkred}{RGB}{192, 0, 0}
\definecolor{revisioncolor}{rgb}{0.8,0.05,0.05}
\definecolor{rebuttalcolor}{rgb}{0.05,0.6,0.05}

\newif\ifcommenton
\commentontrue

\ifcommenton
\newdimen\extramargin
\extramargin=0.5in
\setlength{\marginparwidth}{\dimexpr\extramargin+0.5in\relax}
\addtolength{\paperwidth}{\dimexpr\extramargin+\extramargin\relax}
\addtolength{\evensidemargin}{\extramargin}
\addtolength{\oddsidemargin}{\extramargin}
\usepackage[bordercolor=white,backgroundcolor=orange!30,
linecolor=orange,textsize=scriptsize,prependcaption]{todonotes}
\newcommand{\graham}[1]{\todo[caption=graham]{#1}}
\else
\newcommand{\graham}[1]{}
\fi

\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\newcolumntype{M}[1]{>{\centering\arraybackslash}m{#1}}

\newcommand{\cmark}{\textcolor{darkgreen}{\ding{51}}}
\newcommand{\xmark}{\textcolor{darkred}{\ding{55}}}
\newcommand{\hmark}{\textcolor{darkyellow}{\ding{51}}}

\captionsetup{justification=raggedright,singlelinecheck=true,width=\linewidth}