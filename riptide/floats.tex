\newcommand{\figRipTideIntroResults}{
  \begin{figure}[t]
    \centering
    \begin{minipage}{0.32\linewidth}
    	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/loc_avg_legend-graph-crop.pdf}
	\includegraphics[width=\linewidth]{riptide/figures/pdf/loc_avg-graph-crop.pdf}
    \end{minipage}
    \hfill
    \begin{minipage}{0.32\linewidth}
    	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/energy_avg-graph-crop.pdf}
    \end{minipage}
    \hfill
    \begin{minipage}{0.32\linewidth}
    	\centering
    	\vspace{1.1em}
			\includegraphics[width=\linewidth]{riptide/figures/pdf/perf_avg-graph-crop.pdf}
    \end{minipage}

    \caption{\riptide improves energy-efficiency and performance over the
      state-of-the-art, while compiling programs from high-level C
      (vs.\ vector assembly in SNAFU).}
    \label{fig:riptide:intro:results}
  \end{figure}
}

\newcommand{\figRipTideIntro}{
  \begin{figure}[t]
    \centering
    \includegraphics[width=0.7\linewidth]{riptide/figures/pdf/overview.pdf}
    \caption{\riptide is a co-designed compiler and CGRA microarchitecture
      that executes programs written in a \emph{high-level language}
      with \emph{minimal energy} and high performance.
      %
      \riptide \emph{introduces new control-flow primitives} to
      support common programming idioms, like deeply nested loops
      and irregular memory accesses, while minimizing overhead.
      %
      Finally, \riptide implements its control-flow \emph{in the NoC} to
      increase utilization and ease compilation.}
    \label{fig:riptide:intro}
  \end{figure}
}

\newcommand{\figRipTideSystem}{
\begin{figure}[htb]
	\centering
    \includegraphics[width=0.6\linewidth]{riptide/figures/pdf/system.pdf}
    \caption{\riptide is a compiler and CGRA microarchitecture that maps
      high-level code with arbitrary control flow and memory access to
      an energy-minimal CGRA fabric. To maximize efficiency while
      minimizing area, \riptide implements control flow in the NoC.}
    \label{fig:riptide:system}
\end{figure}
}

\newcommand{\figRipTideCFGates}{
\begin{figure}[t]
	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/cf.pdf}
	\caption{Semantics of new control-flow operations in \riptide.}
	\label{fig:riptide:cf:gates}
\end{figure}
}

\newcommand{\figRipTideCFExecute}{
\begin{figure*}[t]
	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/execute.pdf}
	\caption{}
	\label{fig:riptide:cf:execute}
\end{figure*}
}

\newcommand{\figRipTideCompiler}{
\begin{figure*}[t]
	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/compiler.pdf}
	\caption{\riptidecomp's frontend and middle-end components. The frontend
    compiles C code to LLVM-IR using \texttt{clang}. The middle-end
    produces an optimized dataflow graph (DFG) that enforces memory ordering
    and \riptide's control paradigm.}
	\label{fig:riptide:compiler}
\end{figure*}
}

\newcommand{\figRipTideLSO}{
\begin{figure}[htb]
	\centering
	\includegraphics[width=0.7\linewidth]{riptide/figures/pdf/lso.pdf}
	\caption{\riptidecomp's middle-end enforces memory ordering. For 
    \texttt{example2}, an ordering graph (OG) that is 
    iteratively pruned and reduced.}
	\label{fig:riptide:lso}
\end{figure}
}

\newcommand{\figRipTideLSOResults}{
\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/lso-graph-crop.pdf}
	\caption{}
	\label{fig:riptide:eval:fin}
\end{figure}
}

\newcommand{\figRipTideISA}{
\begin{table}[t]
    \begin{center}
      \caption{\riptide's instruction set architecture (ISA).}
      \label{tab:riptide:isa}
      \scriptsize
      \resizebox{\linewidth}{!}{%
      \begin{tabular}{lccl}
        \toprule 
        \textbf{Operator(s)}    & \textbf{Category} & \textbf{Symbol(s)}                                & \textbf{Semantics}                         \\
        \midrule 
        Basic binary ops        & Arithmetic        & $+$, $-$, $<<$, $!=$, etc.                        & $a$ \texttt{op} $b$                        \\ 
        Multiply, clip          & Multiplier        & $*$, \texttt{clip}                                & $a$ \texttt{op} $b$                        \\ 
        Load                    & Memory            & \texttt{ld}                                       & \texttt{ld} $base$, $idx$                  \\
        Store                   & Memory            & \texttt{st}                                       & \texttt{st} $base$, $idx$, $val$           \\
        Select                  & Control Flow      & \texttt{sel}                                      & $cond$ \texttt{?} $val0$ \texttt{:} $val1$ \\ 
        Steer, carry, invariant & Control Flow      & (\texttt{T} | \texttt{F}), \texttt{C}, \texttt{I} & See \autoref{fig:riptide:cf:gates}                 \\ 
        Merge, order            & Synchronization   & \texttt{M}, \texttt{O}                            & See \autoref{fig:riptide:cf:gates}                 \\ 
        Stream                  & Stream            & \texttt{STR}                                      & See \autoref{fig:riptide:cf:gates}                 \\ 
        \bottomrule 
      \end{tabular}}
    \end{center}
\end{table}
}

\newcommand{\figRipTideCF}{
\begin{figure*}[t]
	\begin{minipage}{0.24\linewidth}
		\centering
		\includegraphics[height=1.52in]{riptide/figures/pdf/cf.pdf}
		\caption{Control-flow gates.}
		\label{fig:riptide:cf:gates}
	\end{minipage}
	\hfill
	\begin{minipage}{0.74\linewidth}
		\centering
		\includegraphics[width=\linewidth]{riptide/figures/pdf/execute.pdf}
		\caption{Shows an example execution.}
		\label{fig:riptide:cf:execute}
	\end{minipage}
\end{figure*}
}

\newcommand{\figRipTideArch}{
\begin{figure*}[t]
\begin{minipage}{0.3\linewidth}
		\centering
		\includegraphics[height=2in]{riptide/figures/pdf/block.pdf}
		\caption{\riptide's ULP CGRA fabric.}
		\label{fig:riptide:arch:block}
	\end{minipage}
	\hfill
	\hspace{4em}
	\begin{minipage}{0.3\linewidth}
		\centering
		\includegraphics[height=2in]{riptide/figures/pdf/pe.pdf}
		\caption{PE microarchitecture}
		\label{fig:riptide:arch:pe}
	\end{minipage}
	\hfill
	\begin{minipage}{0.3\linewidth}
		\centering
		\includegraphics[height=2in]{riptide/figures/pdf/router.pdf}
		\caption{Router microarchitecture}
		\label{fig:riptide:arch:router}
	\end{minipage}
\end{figure*}
}

\newcommand{\figRipTideArchBlock}{
\begin{figure}[t]
	\centering
	\includegraphics[height=2.5in]{riptide/figures/pdf/block.pdf}
	\caption{\riptide's ULP CGRA fabric.}
	\label{fig:riptide:arch:block}
\end{figure}
}

\newcommand{\figRipTideMicroArch}{
\begin{figure}[t]
	\begin{minipage}{0.49\linewidth}
		\centering
		\includegraphics[height=2.5in]{riptide/figures/pdf/pe.pdf}
		\caption{PE microarchitecture}
		\label{fig:riptide:arch:pe}
	\end{minipage}
	\hfill
	\begin{minipage}{0.49\linewidth}
		\centering
		\includegraphics[height=2.5in]{riptide/figures/pdf/router.pdf}
		\caption{Router microarchitecture}
		\label{fig:riptide:arch:router}
	\end{minipage}
\end{figure}
}

\newcommand{\figRipTideFilter}{
\begin{figure}[htb]
	\centering
	\includegraphics[width=0.5\linewidth]{riptide/figures/pdf/filter.pdf}
	\caption{Basic control-flow module in \riptide's routers.}
	\label{fig:riptide:filter}
\end{figure}
}

\newcommand{\figRipTidePrimaryArchResults}{
\begin{figure*}[t]
	\begin{minipage}{\linewidth}
		\centering
		\includegraphics[height=0.15in]{riptide/figures/pdf/energy_legend-graph-crop.pdf}
		
		\vspace{0.2em}

		\includegraphics[width=\linewidth]{riptide/figures/pdf/energy-graph-crop.pdf}
		\caption{Shows the energy (normalized to \riptide) of scalar, vector, \snafu, \riptide across ten benchmarks. \riptide uses 25\% less energy than \snafu. }
		\label{fig:riptide:eval:energy}
	\end{minipage}

	\begin{minipage}{\linewidth}
		\centering
		\vspace{1em}
		\includegraphics[width=\linewidth]{riptide/figures/pdf/perf-graph-crop.pdf}
		\caption{Shows the speedup v. scalar of scalar, vector, \snafu, and \riptide across ten benchmarks. \riptide is 17\% faster than \snafu.}
		\label{fig:riptide:eval:perf}
	\end{minipage}
\end{figure*}
}

\newcommand{\figRipTidePrimaryCompilerResults}{
\begin{figure*}[htb]
	\begin{minipage}{\linewidth}
		\centering
		\includegraphics[height=0.2in]{riptide/figures/pdf/counts_legend-graph-crop.pdf}
		
		\vspace{0.2em}

		\includegraphics[width=\linewidth]{riptide/figures/pdf/counts-graph-crop.pdf}
        \caption{Shows operator counts for ten different benchmarks. Starting with an unoptimized, unordered baseline (\texttt{Raw}), compiler optimizations reduce operator counts while enforcing memory ordering, making it feasible to map benchmarks to hardware.}
		\label{fig:riptide:eval:ops}
	\end{minipage}
\end{figure*}
}

\newcommand{\figRipTideFINResults}{
\begin{figure}[htb]
	\centering
	\includegraphics[width=\linewidth]{riptide/figures/pdf/fin-graph-crop.pdf}
	\caption{Quantifies the benefits of control flow in the NoC. \riptide uses 45\% , 42\%, and 29\% less energy than \riptide w/ No CFiN, a fabric where all CF ops are PEs (All PEs), and a fabric that fuses CF ops into PEs (Fused).  }
	\label{fig:riptide:eval:fin}
\end{figure}
}

\newcommand{\figRipTideLoCResults}{
\begin{figure}[htb]
	\centering
	\includegraphics[height=0.2in]{riptide/figures/pdf/loc_legend-graph-crop.pdf}
	
	\vspace{0.1em}

	\includegraphics[width=\linewidth]{riptide/figures/pdf/loc-graph-crop.pdf}
	\caption{Shows the number of code additions for ten benchmarks running on scalar, vector, \snafu, and \riptide. \riptide requires no hand-coded assembly unlike vector and \snafu.}
	\label{fig:riptide:eval:loc}
\end{figure}
}

\newcommand{\figRipTideBlock}{
\begin{figure}[htb]
	\centering
	\includegraphics[width=0.9\linewidth]{riptide/figures/pdf/block.pdf}
	\caption{}
	\label{fig:riptide:block}
\end{figure}
}

\newcommand{\tabRipTideMicroParams}{
\begin{table}
\caption{Microarchitectural parameters.}
\label{tab:riptide:params}
\end{table}
}

\newcommand{\tabRipTideAppParams}{
\begin{table}
\caption{Application parameters.}
\label{tab:riptide:apps}
\end{table}
}